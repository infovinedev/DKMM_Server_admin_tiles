<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.infovine.dkmm.mapper.common.TCommonCodeMapper">
  <resultMap id="BaseResultMap" type="kr.co.infovine.dkmm.db.model.common.TCommonCodeModel">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 13 15:42:13 KST 2022.
    -->
    <id column="code_group" jdbcType="VARCHAR" property="codeGroup" />
    <id column="code_value" jdbcType="VARCHAR" property="codeValue" />
    <result column="code_name" jdbcType="VARCHAR" property="codeName" />
    <result column="code_description" jdbcType="VARCHAR" property="codeDescription" />
    <result column="disp_order" jdbcType="SMALLINT" property="dispOrder" />
    <result column="ins_seq" jdbcType="BIGINT" property="insSeq" />
    <result column="ins_dt" jdbcType="TIMESTAMP" property="insDt" />
  </resultMap>
  <delete id="deleteByPrimaryKey" parameterType="map">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 13 15:42:13 KST 2022.
    -->
    delete from t_common_code
    where code_group = #{codeGroup,jdbcType=VARCHAR}
      and code_value = #{codeValue,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="kr.co.infovine.dkmm.db.model.common.TCommonCodeModel">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 13 15:42:13 KST 2022.
    -->
    insert into t_common_code (code_group, code_value, code_name, 
      code_description, disp_order, ins_seq, 
      ins_dt)
    values (#{codeGroup,jdbcType=VARCHAR}, #{codeValue,jdbcType=VARCHAR}, #{codeName,jdbcType=VARCHAR}, 
      #{codeDescription,jdbcType=VARCHAR}, #{dispOrder,jdbcType=SMALLINT}, #{insSeq,jdbcType=BIGINT}, 
      now())
  </insert>
  <update id="updateByPrimaryKey" parameterType="kr.co.infovine.dkmm.db.model.common.TCommonCodeModel">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 13 15:42:13 KST 2022.
    -->
    update t_common_code
    set code_name = #{codeName,jdbcType=VARCHAR},
      code_description = #{codeDescription,jdbcType=VARCHAR},
      disp_order = #{dispOrder,jdbcType=SMALLINT},
      ins_seq = #{insSeq,jdbcType=BIGINT},
      ins_dt = now()
    where code_group = #{codeGroup,jdbcType=VARCHAR}
      and code_value = #{codeValue,jdbcType=VARCHAR}
  </update>
  
  <update id="updateByDescriptionAndInsDt" parameterType="kr.co.infovine.dkmm.db.model.common.TCommonCodeModel">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 13 15:42:13 KST 2022.
    -->
    update t_common_code
    set 
      code_description = #{codeDescription,jdbcType=VARCHAR}
    <if test="insDt != null">
	      , ins_dt = #{insDt,jdbcType=TIMESTAMP}
 	</if>
    where code_group = #{codeGroup,jdbcType=VARCHAR}
      and code_value = #{codeValue,jdbcType=VARCHAR}
  </update>
  
  <select id="selectByPrimaryKey" parameterType="map" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue  Sep 13 15:42:13 KST 2022.
    -->
    select code_group, code_value, code_name, code_description, disp_order, ins_seq, 
    ins_dt
    from t_common_code
    where code_group = #{codeGroup,jdbcType=VARCHAR}
      and code_value = #{codeValue,jdbcType=VARCHAR}
  </select>
  <select id="selectByCodeGroup" parameterType="map" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue  Sep 13 15:42:13 KST 2022.
    -->
    select code_group, code_value, code_name, code_description, disp_order, ins_seq, 
    ins_dt
    from t_common_code
    where code_group = #{codeGroup,jdbcType=VARCHAR}
  </select>
  <select id="selectAll" parameterType="kr.co.infovine.dkmm.db.model.common.TCommonCodeModel" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 13 15:42:13 KST 2022.
    -->
    select code_group, code_value, code_name, code_description, disp_order, ins_seq, 
    ins_dt
    from t_common_code
    where 1=1
    <if test='searchStartDt neq null and !"".equals(searchStartDt)'>
      AND TO_CHAR(ins_dt, 'YYYY-MM-DD') BETWEEN #{searchStartDt} AND #{searchEndDt}
    </if>
    <if test='searchCodeGroup neq null and !"".equals(searchCodeGroup)'>
      AND code_group = #{searchCodeGroup}
    </if>
    order by  code_group, disp_order, code_value
  </select>
  <!--     <if test='searchText neq null and !"".equals(searchText)'> -->
<!--       AND (code_group LIKE CONCAT('%', #{searchText}, '%') -->
<!--       		OR code_value LIKE CONCAT('%', #{searchText}, '%') -->
<!--       		OR code_name LIKE CONCAT('%', #{searchText}, '%') -->
<!--       		OR code_description LIKE CONCAT('%', #{searchText}, '%') -->
<!--       		) -->
<!--     </if> -->
  
  
  <select id="selectCodeGroup" resultMap="BaseResultMap">
    select  DISTINCT code_group
    from t_common_code
	order by  code_group
  </select>
  
  <select id="selectCommonCode" parameterType="kr.co.infovine.dkmm.db.model.common.TCommonCodeModel" resultMap="BaseResultMap">
  select code_value , code_name  from t_common_code
  where code_group  = #{codeGroup,jdbcType=VARCHAR}
  order by case  when code_value ='REGISTER'  then 0
                 when code_value ='LIKE'      then 1
                 when code_value ='GET'       then 2
                 when code_value ='ACT'       then 3
                 when code_value ='EMAIL'     then 4
                 when code_value ='CUSTOM001' then 5
                 end
  </select>
</mapper>