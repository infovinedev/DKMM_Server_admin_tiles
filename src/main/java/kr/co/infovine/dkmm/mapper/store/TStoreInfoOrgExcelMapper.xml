<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.infovine.dkmm.mapper.store.TStoreInfoOrgExcelMapper">
  <resultMap id="BaseResultMap" type="kr.co.infovine.dkmm.db.model.store.TStoreInfoOrgExcel">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Nov 22 16:51:41 KST 2022.
    -->
    <result column="seq" jdbcType="VARCHAR" property="seq" />
    <result column="service_nm" jdbcType="VARCHAR" property="serviceNm" />
    <result column="service_id" jdbcType="VARCHAR" property="serviceId" />
    <result column="area_code" jdbcType="VARCHAR" property="areaCode" />
    <result column="manage_no" jdbcType="VARCHAR" property="manageNo" />
    <result column="approval_dt" jdbcType="VARCHAR" property="approvalDt" />
    <result column="cancel_dt" jdbcType="VARCHAR" property="cancelDt" />
    <result column="status_type" jdbcType="VARCHAR" property="statusType" />
    <result column="status_nm" jdbcType="VARCHAR" property="statusNm" />
    <result column="status_code" jdbcType="VARCHAR" property="statusCode" />
    <result column="status_nm2" jdbcType="VARCHAR" property="statusNm2" />
    <result column="close_dt" jdbcType="VARCHAR" property="closeDt" />
    <result column="holiday_start_dt" jdbcType="VARCHAR" property="holidayStartDt" />
    <result column="holiday_end_dt" jdbcType="VARCHAR" property="holidayEndDt" />
    <result column="reopen_dt" jdbcType="VARCHAR" property="reopenDt" />
    <result column="tel" jdbcType="VARCHAR" property="tel" />
    <result column="area_size" jdbcType="VARCHAR" property="areaSize" />
    <result column="zip" jdbcType="VARCHAR" property="zip" />
    <result column="addr" jdbcType="VARCHAR" property="addr" />
    <result column="road_addr" jdbcType="VARCHAR" property="roadAddr" />
    <result column="road_zip" jdbcType="VARCHAR" property="roadZip" />
    <result column="store_nm" jdbcType="VARCHAR" property="storeNm" />
    <result column="upt_dt" jdbcType="VARCHAR" property="uptDt" />
    <result column="sql_type" jdbcType="VARCHAR" property="sqlType" />
    <result column="data_upt_dt" jdbcType="VARCHAR" property="dataUptDt" />
    <result column="ctgry_nm" jdbcType="VARCHAR" property="ctgryNm" />
    <result column="position_x" jdbcType="VARCHAR" property="positionX" />
    <result column="position_y" jdbcType="VARCHAR" property="positionY" />
    <result column="ctgry_nm2" jdbcType="VARCHAR" property="ctgryNm2" />
    <result column="man_cnt" jdbcType="VARCHAR" property="manCnt" />
    <result column="woman_cnt" jdbcType="VARCHAR" property="womanCnt" />
    <result column="area_type" jdbcType="VARCHAR" property="areaType" />
    <result column="degree_type" jdbcType="VARCHAR" property="degreeType" />
    <result column="water_type" jdbcType="VARCHAR" property="waterType" />
    <result column="person_cnt1" jdbcType="VARCHAR" property="personCnt1" />
    <result column="person_cnt2" jdbcType="VARCHAR" property="personCnt2" />
    <result column="person_cnt3" jdbcType="VARCHAR" property="personCnt3" />
    <result column="person_cnt4" jdbcType="VARCHAR" property="personCnt4" />
    <result column="person_cnt5" jdbcType="VARCHAR" property="personCnt5" />
    <result column="store_buy_type" jdbcType="VARCHAR" property="storeBuyType" />
    <result column="store_money" jdbcType="VARCHAR" property="storeMoney" />
    <result column="store_month_money" jdbcType="VARCHAR" property="storeMonthMoney" />
    <result column="many_use_yn" jdbcType="VARCHAR" property="manyUseYn" />
    <result column="area_tot" jdbcType="VARCHAR" property="areaTot" />
    <result column="culture_no" jdbcType="VARCHAR" property="cultureNo" />
    <result column="culture_menu" jdbcType="VARCHAR" property="cultureMenu" />
    <result column="hompage" jdbcType="VARCHAR" property="hompage" />
    <result column="process_yn" jdbcType="VARCHAR" property="processYn" />
  </resultMap>
  <insert id="insert" parameterType="kr.co.infovine.dkmm.db.model.store.TStoreInfoOrgExcel">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Nov 22 16:51:41 KST 2022.
    -->
    insert into t_store_info_org_excel (seq, service_nm, service_id, 
      area_code, manage_no, approval_dt, 
      cancel_dt, status_type, status_nm, 
      status_code, status_nm2, close_dt, 
      holiday_start_dt, holiday_end_dt, reopen_dt, 
      tel, area_size, zip, 
      addr, road_addr, road_zip, 
      store_nm, upt_dt, sql_type, 
      data_upt_dt, ctgry_nm, position_x, 
      position_y, ctgry_nm2, man_cnt, 
      woman_cnt, area_type, degree_type, 
      water_type, person_cnt1, person_cnt2, 
      person_cnt3, person_cnt4, person_cnt5, 
      store_buy_type, store_money, store_month_money, 
      many_use_yn, area_tot, culture_no, 
      culture_menu, hompage, process_yn
      )
    values (#{seq,jdbcType=VARCHAR}, #{serviceNm,jdbcType=VARCHAR}, #{serviceId,jdbcType=VARCHAR}, 
      #{areaCode,jdbcType=VARCHAR}, #{manageNo,jdbcType=VARCHAR}, #{approvalDt,jdbcType=VARCHAR}, 
      #{cancelDt,jdbcType=VARCHAR}, #{statusType,jdbcType=VARCHAR}, #{statusNm,jdbcType=VARCHAR}, 
      #{statusCode,jdbcType=VARCHAR}, #{statusNm2,jdbcType=VARCHAR}, #{closeDt,jdbcType=VARCHAR}, 
      #{holidayStartDt,jdbcType=VARCHAR}, #{holidayEndDt,jdbcType=VARCHAR}, #{reopenDt,jdbcType=VARCHAR}, 
      #{tel,jdbcType=VARCHAR}, #{areaSize,jdbcType=VARCHAR}, #{zip,jdbcType=VARCHAR}, 
      #{addr,jdbcType=VARCHAR}, #{roadAddr,jdbcType=VARCHAR}, #{roadZip,jdbcType=VARCHAR}, 
      #{storeNm,jdbcType=VARCHAR}, #{uptDt,jdbcType=VARCHAR}, #{sqlType,jdbcType=VARCHAR}, 
      #{dataUptDt,jdbcType=VARCHAR}, #{ctgryNm,jdbcType=VARCHAR}, #{positionX,jdbcType=VARCHAR}, 
      #{positionY,jdbcType=VARCHAR}, #{ctgryNm2,jdbcType=VARCHAR}, #{manCnt,jdbcType=VARCHAR}, 
      #{womanCnt,jdbcType=VARCHAR}, #{areaType,jdbcType=VARCHAR}, #{degreeType,jdbcType=VARCHAR}, 
      #{waterType,jdbcType=VARCHAR}, #{personCnt1,jdbcType=VARCHAR}, #{personCnt2,jdbcType=VARCHAR}, 
      #{personCnt3,jdbcType=VARCHAR}, #{personCnt4,jdbcType=VARCHAR}, #{personCnt5,jdbcType=VARCHAR}, 
      #{storeBuyType,jdbcType=VARCHAR}, #{storeMoney,jdbcType=VARCHAR}, #{storeMonthMoney,jdbcType=VARCHAR}, 
      #{manyUseYn,jdbcType=VARCHAR}, #{areaTot,jdbcType=VARCHAR}, #{cultureNo,jdbcType=VARCHAR}, 
      #{cultureMenu,jdbcType=VARCHAR}, #{hompage,jdbcType=VARCHAR}, #{processYn,jdbcType=VARCHAR}
      )
  </insert>
  <select id="selectAll" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Nov 22 16:51:41 KST 2022.
    -->
    select seq, service_nm, service_id, area_code, manage_no, approval_dt, cancel_dt, 
    status_type, status_nm, status_code, status_nm2, close_dt, holiday_start_dt, holiday_end_dt, 
    reopen_dt, tel, area_size, zip, addr, road_addr, road_zip, store_nm, upt_dt, sql_type, 
    data_upt_dt, ctgry_nm, position_x, position_y, ctgry_nm2, man_cnt, woman_cnt, area_type, 
    degree_type, water_type, person_cnt1, person_cnt2, person_cnt3, person_cnt4, person_cnt5, 
    store_buy_type, store_money, store_month_money, many_use_yn, area_tot, culture_no, 
    culture_menu, hompage, process_yn
    from t_store_info_org_excel
  </select>
  
  <select id="selectProcCount" resultType="int">
    SELECT COUNT(1) FROM t_store_info_org_excel WHERE process_yn = 'N'
  </select>
  
  <update id="updateStoreOrgStatus01">
  	/* TStoreInfoOrgExcel.updateStoreOrgStatus01   STORE_ORG 영업중 상점 process_yn update */
	UPDATE 	t_store_info_org_excel	
	SET		process_yn = 'Y'	
	WHERE status_type = '01' 
	AND   process_yn = 'N'   
  </update>
  
  <update id="updateStoreOrgStatus02">
  	/* TStoreInfoOrgExcel.updateStoreOrgStatus02   STORE_ORG 폐업 상점 process_yn update */
  	<![CDATA[
	UPDATE 	t_store_info_org_excel	
	SET		process_yn = 'Y'	
	WHERE status_type <> '01'   
	AND   process_yn = 'N'   
	]]>   
  </update>
  
  <insert id="bulkInsert">
  	/* TStoreInfoOrgExcel.bulkInsert   STORE_ORG 엑셀 상점 update */
  	insert into t_store_info_org_excel														
	(                                                                               
		 seq				,service_nm			,service_id		,area_code          
		,manage_no			,approval_dt		,cancel_dt		,status_type        
		,status_nm			,status_code		,status_nm2		,close_dt           
		,holiday_start_dt	,holiday_end_dt		,reopen_dt		,tel                
		,area_size			,zip				,addr			,road_addr          
		,road_zip			,store_nm			,upt_dt			,sql_type           
		,data_upt_dt		,ctgry_nm			,position_x		,position_y         
		,ctgry_nm2			,man_cnt			,woman_cnt		,area_type          
		,degree_type		,water_type			,person_cnt1	,person_cnt2        
		,person_cnt3		,person_cnt4		,person_cnt5	,store_buy_type		
		,store_money		,store_month_money	,many_use_yn	,area_tot           
		,culture_no			,culture_menu		,hompage		,process_yn         
	) values
	<foreach collection="list" item="item" separator=",">
	(
		#{item.seq,jdbcType=VARCHAR}, #{item.serviceNm,jdbcType=VARCHAR}, #{item.serviceId,jdbcType=VARCHAR}, #{item.areaCode,jdbcType=VARCHAR},
   		#{item.manageNo,jdbcType=VARCHAR}, #{item.approvalDt,jdbcType=VARCHAR}, #{item.cancelDt,jdbcType=VARCHAR}, #{item.statusType,jdbcType=VARCHAR}, 
   		#{item.statusNm,jdbcType=VARCHAR}, #{item.statusCode,jdbcType=VARCHAR}, #{item.statusNm2,jdbcType=VARCHAR}, #{item.closeDt,jdbcType=VARCHAR}, 
      	#{item.holidayStartDt,jdbcType=VARCHAR}, #{item.holidayEndDt,jdbcType=VARCHAR}, #{item.reopenDt,jdbcType=VARCHAR}, #{item.tel,jdbcType=VARCHAR}, 
      	#{item.areaSize,jdbcType=VARCHAR}, #{item.zip,jdbcType=VARCHAR}, #{item.addr,jdbcType=VARCHAR}, #{item.roadAddr,jdbcType=VARCHAR}, 
      	#{item.roadZip,jdbcType=VARCHAR}, #{item.storeNm,jdbcType=VARCHAR}, #{item.uptDt,jdbcType=VARCHAR}, #{item.sqlType,jdbcType=VARCHAR}, 
      	#{item.dataUptDt,jdbcType=VARCHAR}, #{item.ctgryNm,jdbcType=VARCHAR}, #{item.positionX,jdbcType=VARCHAR}, #{item.positionY,jdbcType=VARCHAR}, 
      	#{item.ctgryNm2,jdbcType=VARCHAR}, #{item.manCnt,jdbcType=VARCHAR}, #{item.womanCnt,jdbcType=VARCHAR}, #{item.areaType,jdbcType=VARCHAR}, 
      	#{item.degreeType,jdbcType=VARCHAR}, #{item.waterType,jdbcType=VARCHAR}, #{item.personCnt1,jdbcType=VARCHAR}, #{item.personCnt2,jdbcType=VARCHAR}, 
      	#{item.personCnt3,jdbcType=VARCHAR}, #{item.personCnt4,jdbcType=VARCHAR}, #{item.personCnt5,jdbcType=VARCHAR}, #{item.storeBuyType,jdbcType=VARCHAR}, 
      	#{item.storeMoney,jdbcType=VARCHAR}, #{item.storeMonthMoney,jdbcType=VARCHAR}, #{item.manyUseYn,jdbcType=VARCHAR}, #{item.areaTot,jdbcType=VARCHAR}, 
      	#{item.cultureNo,jdbcType=VARCHAR}, #{item.cultureMenu,jdbcType=VARCHAR}, #{item.hompage,jdbcType=VARCHAR}, 'N'       
	)  
	</foreach>                                                                             
	ON CONFLICT (manage_no) DO UPDATE                                               
	SET                                                                             
		service_nm         = excluded.service_nm                                    
		,service_id         = excluded.service_id                                   
		,area_code          = excluded.area_code                                    
		,approval_dt        = excluded.approval_dt                                  
		,cancel_dt          = excluded.cancel_dt                                    
		,status_type        = excluded.status_type                                  
		,status_nm          = excluded.status_nm                                    
		,status_code        = excluded.status_code                                  
		,status_nm2         = excluded.status_nm2                                   
		,close_dt           = excluded.close_dt                                     
		,holiday_start_dt   = excluded.holiday_start_dt                             
		,holiday_end_dt     = excluded.holiday_end_dt                               
		,reopen_dt          = excluded.reopen_dt                                    
		,tel                = excluded.tel                                          
		,area_size          = excluded.area_size                                    
		,zip                = excluded.zip                                          
		,addr               = excluded.addr                                         
		,road_addr          = excluded.road_addr                                    
		,road_zip           = excluded.road_zip                                     
		,store_nm           = excluded.store_nm                                     
		,upt_dt             = excluded.upt_dt                                       
		,sql_type           = excluded.sql_type                                     
		,data_upt_dt        = excluded.data_upt_dt                                  
		,ctgry_nm           = excluded.ctgry_nm                                     
		,position_x         = excluded.position_x                                   
		,position_y         = excluded.position_y                                   
		,ctgry_nm2          = excluded.ctgry_nm2                                    
		,man_cnt            = excluded.man_cnt                                      
		,woman_cnt          = excluded.woman_cnt                                    
		,area_type          = excluded.area_type                                    
		,degree_type        = excluded.degree_type                                  
		,water_type         = excluded.water_type                                   
		,person_cnt1        = excluded.person_cnt1                                  
		,person_cnt2        = excluded.person_cnt2                                  
		,person_cnt3        = excluded.person_cnt3                                  
		,person_cnt4        = excluded.person_cnt4                                  
		,person_cnt5        = excluded.person_cnt5                                  
		,store_buy_type     = excluded.store_buy_type                               
		,store_money        = excluded.store_money                                  
		,store_month_money  = excluded.store_month_money                            
		,many_use_yn        = excluded.many_use_yn                                  
		,area_tot           = excluded.area_tot                                     
		,culture_no         = excluded.culture_no                                   
		,culture_menu       = excluded.culture_menu                                 
		,hompage            = excluded.hompage                                      
		,process_yn         = 'N'                                                   
  </insert>
  
  <delete id="truncateStoreOrgExcel" >
  	truncate table t_store_info_org_excel
  </delete>
  
  
</mapper>